services:
  - type: web
    name: shopee-auth-production
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: bash start.sh
    envVars:
      - key: PARTNER_ID
        value: "2011520"  # ✅ LIVE Partner ID
      - key: PARTNER_KEY
        value: "707378444d6c6652564a427658499647f7617a4f6a75487069547745746e6b4b"  # ✅ LIVE Partner Key
      - key: REDIRECT_URL
        value: "https://final-e74d.onrender.com/callback"
      - key: DB_HOST
        value: "cidpacmaoaieyhgagmen.supabase.co"
      - key: DB_PORT
        value: "5432"
      - key: DB_NAME
        value: "postgres"
      - key: DB_USER
        value: "postgres"
      - key: DB_PASSWORD
        value: "S4GDQ1yBiPY56MV0"

  - type: cron
    name: shopee-token-refresh
    env: python
    schedule: "*/30 * * * *"  # ทุก 30 นาที
    buildCommand: pip install -r requirements.txt
    startCommand: python refresh_loop.py
    envVars:
      - key: PARTNER_ID
        value: "2011520"
      - key: PARTNER_KEY
        value: "707378444d6c6652564a427658499647f7617a4f6a75487069547745746e6b4b"
      - key: REDIRECT_URL
        value: "https://final-e74d.onrender.com/callback"
      - key: DB_HOST
        value: "cidpacmaoaieyhgagmen.supabase.co"
      - key: DB_PORT
        value: "5432"
      - key: DB_NAME
        value: "postgres"
      - key: DB_USER
        value: "postgres"
      - key: DB_PASSWORD
        value: "S4GDQ1yBiPY56MV0"
