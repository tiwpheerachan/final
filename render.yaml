services:
  - type: web
    name: shopee-auth
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: bash start.sh
    envVars:
      - key: PARTNER_ID
        value: "1280076"
      - key: PARTNER_KEY
        value: "41486946494654774e677354666f7a6d6f7856736c516c49544c7872694b5558"
      - key: REDIRECT_URL
        value: "https://shopee-api-database.onrender.com"
      - key: DB_HOST
        value: "aws-0-ap-southeast-1.pooler.supabase.com"
      - key: DB_NAME
        value: "postgres"
      - key: DB_USER
        value: "postgres.sujexdliidmmmyzjsiys"
      - key: DB_PASS
        value: "Shd2025!"

  - type: cron
    name: shopee-cron
    env: python
    schedule: "*/30 * * * *"  # รันทุก 30 นาที
    buildCommand: pip install -r requirements.txt
    startCommand: python refresh_loop.py
    envVars:
      - key: PARTNER_ID
        value: "1280076"
      - key: PARTNER_KEY
        value: "41486946494654774e677354666f7a6d6f7856736c516c49544c7872694b5558"
      - key: REDIRECT_URL
        value: "https://shopee-api-database.onrender.com"
      - key: DB_HOST
        value: "aws-0-ap-southeast-1.pooler.supabase.com"
      - key: DB_NAME
        value: "postgres"
      - key: DB_USER
        value: "postgres.sujexdliidmmmyzjsiys"
      - key: DB_PASS
        value: "Shd2025!"
